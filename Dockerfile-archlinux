FROM base/archlinux:latest
MAINTAINER Mathieu Tarral <mathieu.tarral@gmail.com>

RUN pacman --noconfirm -Syu

# add simple user
#------------------
RUN useradd -m docker
RUN pacman --noconfirm -S sudo
RUN echo "docker ALL=(ALL) NOPASSWD:ALL" >> /etc/sudoers

# Install dependencies
#---------------------------
# -> Essentials
RUN pacman --noconfirm -S gcc git cmake make vim tree
# -> kdesrc-build script
RUN pacman --noconfirm -S perl perl-json perl-libwww perl-xml-parser dialog qt5-base # qmake
# -> KDE Frameworks 5
RUN pacman --noconfirm -S bzr doxygen       # libdbusmenu-qt
RUN pacman --noconfirm -S qt5-script        # ki18n
RUN pacman --noconfirm -S qt5-x11extras     # kwindowsystem
RUN pacman --noconfirm -S docbook-xsl       # kdocbook
RUN pacman --noconfirm -S qt5-tools         # kwidgetsaddons
RUN pacman --noconfirm -S qt5-svg           # kiconthemes
RUN pacman --noconfirm -S boost             # kactivities
RUN pacman --noconfirm -S giflib            # khtml
RUN pacman --noconfirm -S vlc               # phonon-vlc
RUN pacman --noconfirm -S pkg-config        # phonon-gstreamer
# -> KDE Workspace
RUN pacman --noconfirm -S gtkmm gtkmm3      # kde-gtk-config
RUN pacman --noconfirm -S xapian-core       # baloo
RUN pacman --noconfirm -S libepoxy          # kwin
RUN pacman --noconfirm -S libnm-glib        # libnm-qt
RUN pacman --noconfirm -S fontforge         # oxygen-fonts
RUN pacman --noconfirm -S qt5-quick1        # kdevplatform
RUN pacman --noconfirm -S exiv2             # gwenview
RUN pacman --noconfirm -S sane              # libksane

# kde anongit url alias
RUN su docker -c 'git config --global url."git://anongit.kde.org/".insteadOf kde:'

VOLUME /work
RUN chown docker:docker /work

ENTRYPOINT "/bin/bash"
