FROM fedora:latest
MAINTAINER Mathieu Tarral <mathieu.tarral@gmail.com>

RUN yum -y upgrade

# add simple user
#------------------
RUN useradd -m docker
UN yum -y install sudo
RUN echo "docker ALL=(ALL) NOPASSWD:ALL" >> /etc/sudoers

# Install dependencies
#---------------------------
# -> Essentials
RUN yum -y install gcc-c++ git doxygen cmake bzr vim
# -> kdesrc-build script
RUN yum -y install dialog perl-libwww-perl perl-JSON perl-XML-Parser \
                    qt5-qtbase-devel # qmake
# -> KDE Frameworks 5
# KF5 COMPONENT         |       BUILD DEPENDENCY
#-----------------------|--------------------------
# ki18n                 |       qt5-qtscript-devel
# kwindowsystem         |       qt5-qtx11extras-devel libXrender-devel xcb-util-keysyms-devel
# karchive              |       zlib-devel
# kdoctools             |       libxslt-devel docbook-style-xsl
# kwidgetsaddons        |       qt5-qttools-devel qt5-qttools-static
# kiconthemes           |       qt5-qtsvg-devel
# solid                 |       ?
#-----------------------------------------------
RUN yum install -y qt5-qtscript-devel qt5-qtx11extras-devel libXrender-devel \
                    xcb-util-keysyms-devel zlib-devel libxslt-devel \
                    docbook-style-xsl qt5-qttools-devel qt5-qttools-static \
                    qt5-qtsvg-devel

# kde anongit url alias
RUN su docker -c 'git config --global url."git://anongit.kde.org/".insteadOf kde:'

VOLUME /work
RUN chown docker:users /work
WORKDIR /work
ENTRYPOINT ["/bin/bash"]
